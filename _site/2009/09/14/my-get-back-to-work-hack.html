<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="The online writing of Alex Payne" name="description">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.0/css/bulma.min.css" type="text/css">
  <link rel="stylesheet" href="/css/screen.css" type="text/css">
  <link rel="alternate" type="application/atom+xml" title="Alex Payne" href="/atom.xml">
  <link rel="canonical" href="http://localhost:3000/2009/09/14/my-get-back-to-work-hack.html"/>
  <script src="/js/helpers.js"></script>
  <title>Alex Payne &mdash; My Get-Back-To-Work Hack</title>
<script src="http://127.0.0.1:35729/livereload.js"></script></head>

<body>
  <nav class="navbar is-dark" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/">
        <tt><strong>3</strong></tt>
      </a>
      <button class="button navbar-burger" data-target="navMenu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div class="navbar-menu" id="navMenu">
      <div class="navbar-start">
        <a class="navbar-item" href="/">Home</a>
        <a href="/about.html" class="navbar-item" title="About the author and site">About</a>
        <a href="/archive.html" class="navbar-item" title="Archived writing">Archive</a>
        <a href="/publications.html" class="navbar-item" title="Publications">Publications</a>
        <a href="/events.html" class="navbar-item" title="Events">Events</a>
      </div>
      <div class="navbar-end">
      </div>
    </div>
  </div>
</nav>


  <section class="hero is-light">
  <div class="hero-body">
    <div class="container">
      <h1 class="title">Alex Payne</h1>
      <h2 class="subtitle">
        Writer, backer, erstwhile technologist.
      </h2>
    </div>
  </div>
</section>


  <section class="section main-section">
    <div class="container">
      <div class="columns is-desktop">
        <div class="column is-half is-offset-one-quarter">
          <div class="content">
            <div class="post">
  <h1 id="my-get-back-to-work-hack">My Get-Back-To-Work Hack</h1>

<p>I’ve been looking for a way to fight distractions on the web. I’ve tried <a href="http://visitsteve.com/work/selfcontrol/">SelfControl</a>, but just getting a “server not found” error in the browser when I visit a temptingly unproductive site isn’t particularly motivational.</p>

<p>The hack for this I came up with today is cheap and dumb, but it works. If you want to be sure it’s worth your time, watch this 46 second long <a href="http://screenr.com/Ix7">screencast</a>, then read on if you like what you see.</p>

<p>If you’re an experienced web developer, this will probably take you all of ten minutes to set up. If not, I’ve tried to explain it in pretty friendly terminology, but you might want to grab the nearest techie to help you out.</p>

<h2 id="step-one-block-distracting-domains">Step One: Block Distracting Domains</h2>

<p>The <code class="highlighter-rouge">/etc/hosts</code> file tells your computer where other computers are. Normally, this file is almost empty; it just points your computer at itself, reminding it that its local address is <code class="highlighter-rouge">127.0.0.1</code>. Your computer doesn’t need to know much more than that because it uses <a href="http://en.wikipedia.org/wiki/Domain_Name_System">DNS</a> and similar protocols to find other computers over the network. Still, every time your computer tries to talk to another computer, it checks <code class="highlighter-rouge">/etc/hosts</code> to see if we’ve specified the other computer’s address.</p>

<p>We can make use of the <code class="highlighter-rouge">/etc/hosts</code> file to block specific domains that we shouldn’t be spending time on. We just associate those domains with a bad address - in this case, the address of our local machine.</p>

<p>My <code class="highlighter-rouge">/etc/hosts</code> looks like <a href="http://gist.github.com/187138">this</a>. It’s the lines below the commented-out line about “distractions” that matter. Those lines say that the specified domains are served by my own computer. They aren’t, of course, so when I visit those sites, my browser gives me an error page.</p>

<p>Go ahead and put your own time-wasting sites in there; be sure to add the “www.” variant, if the site has one. If you like, you can collapse all the domains onto one line after the “127.0.0.1”, but I find it easier to read over multiple lines.</p>

<p>To an extent, this solves the problem: if you visit one of the domains you added to the file, you don’t get there. But as with SelfControl’s solution, an error page in your browser isn’t very motivational. Let’s go further.</p>

<h2 id="step-two-serving-content-for-blocked-domains">Step Two: Serving Content for Blocked Domains</h2>

<p>Since we’re directing requests for distracting domains to our own system, why not do something with those requests? Fire up a web server on the usual port (80). On a Mac, this is as simple as going to Sharing in System Preferences and ticking the box for Web Sharing. The text there may say that your computer’s website is available at some fancy address, but it’s also available on <a href="http://127.0.0.1/">http://127.0.0.1/</a>.</p>

<p>Now, visit one of those sites you put in your <code class="highlighter-rouge">/etc/hosts</code>. You get a real webpage this time, right? Most likely, it’s whatever default page came with your web server software; it might say “It worked!” or something equally inane. The name of this file is probably <code class="highlighter-rouge">index.html.en</code> (or maybe without the “.en” part). On a Mac, it lives at <code class="highlighter-rouge">/Library/WebServer/Documents/index.html.en</code>. You should modify that file. Make it pretty, but not too pretty. Put a message in there that’s motivational to you. Visit one of your blocked sites, and you should see your custom message instead. Pretty good.</p>

<p>There’s a problem, though. Say you blocked dumbsite.com. If you visit <code class="highlighter-rouge">http://dumbsite.com/foo/bar/baz.html</code>, you’ll get a <code class="highlighter-rouge">404 File Not Found</code> error from your local web server. That’s because you don’t have the files and directories the server is looking for inside the default folder your web server stores web pages in. You don’t want to have to provide these, either; you just want to serve the same page for every domain you’ve blocked.</p>

<p>If you’re using Apache, you can use a couple of lines like <a href="http://gist.github.com/187146">this</a> inside your <code class="highlighter-rouge">httpd.conf</code> to rewrite any URL to point to a file in your document root (in this case, <code class="highlighter-rouge">index.php</code>, but change that to whatever you want). That will get you back to seeing your custom page when you visit a blocked domain, regardless of the URL.</p>

<p>If you want to keep it simple, get all that working and stop here. You’ve got a nice custom reminder to get back to work, and few moving parts to maintain. If you’re comfortable setting up PHP, though, venture on for a little gravy.</p>

<h2 id="step-three-doing-something-useful-with-blocked-domains">Step Three: Doing Something Useful with Blocked Domains</h2>

<p>I didn’t just want a motivational message. I wanted a reminder of exactly what I should be doing.</p>

<p>Once I got the above working, I flipped on PHP in my <code class="highlighter-rouge">httpd.conf</code> and set Apache to run as my user. Then, I changed my <code class="highlighter-rouge">index.php</code> to <a href="http://gist.github.com/187147">this</a>. The key lines are at the bottom. They tell PHP to fire off a command, just as if I issued it from a terminal. In my setup, the command will fire up <a href="http://culturedcode.com/things/">Things</a> if it isn’t running, or move it to the front of my windows if it is.</p>

<h2 id="variations">Variations</h2>

<p>There’s a bunch of ways you could do this differently. Rather than modifying <code class="highlighter-rouge">/etc/hosts</code>, you could firewall off any distracting domains. You could run your own HTTP proxy and do the filtering there. Or, rather than popping up an application, you could have that PHP script (or however you decide to implement it) pull your to-do list right into the admonishing web page. Or, you could, y’know, just use plain old real actual self control. But that’s easier said than done, I’ve found.</p>

<p>What you do with the block page is really up to you. All I know is, popping up my to-do list works for me as motivation to get something done. I took a couple extra steps and ensured that only my local machine could get to that page, so folks on my local network couldn’t be popping up Things all day long by hitting the right IP in their browser. Other than that, I haven’t wanted to do anything fancier. That’s not really the point, after all.</p>

<p>Incidentally, I’ve found that limiting my consumption of distracting domains to the iPhone is a good way of regulating my time. If I have my iPhone in hand for more than a minute or two, I’m probably waiting around for something, in which case it wouldn’t hurt to see what’s up on <a href="http://news.ycombinator.com/">Hacker News</a>. Because reading on the iPhone isn’t optimal, I’m not likely to get lost in a sea of interesting links for an hour or two.</p>

  <time class="is-pulled-right" datetime="2009-09-14">
    &mdash; September 14, 2009
  </time>
</div>

          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
  <div class="container">
    <div class="content">
      &copy; 2017 Alex Payne
      &middot;
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND</a>
    </div>
  </div>
</footer>

  
</body>

</html>
